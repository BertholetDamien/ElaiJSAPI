<dom-module id="elaijsapi-pageBanner">
  <style>
    #pageTitle {
      font-size: 2em;
      
      background-color: var(--dark-black-color);
      color: var(--light-white-color);
      padding: 0 1em;
      border-bottom: var(--border-size) solid var(--very-dark-black-color);
      
      width: calc(100% - var(--navigationArea-width) - 2em);
      position: fixed;
    }
    
    #pageTitle > div {
      height: var(--logo-height);
      justify-content: space-between;
    }
    
    #searchInputCollapse input {
      height: 30px;
      font-size: 20px;
    }
  </style>
    
  <template>
    <div id="pageTitle">
      <div class="layout horizontal center">
        <span>
        {{getPageName(lang, pageInfo)}}
        </span>
        <div id="search" class="layout horizontal center">
          <iron-collapse id="searchInputCollapse" class="iron-collapse-closed" horizontal=true>
            <div class="content layout horizontal center">
              <input id="searchInput" type="text" autocomplete="off" on-keyup=onKeyPress>
            </div>
          </iron-collapse>
          <div class="icon action search white icon36" on-click=toggleSearch></div>
        </div>
      </div>
    </div>
  </template>
  
  <script>
    ElaiJSBehaviors.wait(function() {
    Polymer({
      is: 'elaijsapi-pageBanner',
      behaviors: [ElaiJSBehaviors.Basic,
                  ElaiJSBehaviors.Navigator
      ],
      getPageName: function(lang, pageInfo) {
        return lang.get(pageInfo.name || pageInfo.page);
      },
      toggleSearch: function () {
        this.$.searchInputCollapse.toggle();
        this.$.searchInput.select();
        this.$.searchInput.focus();
      },
      onKeyPress: function(event, detail, sender) {
        if(event.keyCode == 13) {
          var value = this.$.searchInput.value;
          if(value)
            openSearchPage.call(this, value);
        }
        
        function openSearchPage(value) {
          var q = "site:elaijs.com+" + value;
          window.open("https://www.google.com/search?q=" + q);
          
          this.$.searchInputCollapse.toggle();
        }
      }
    });
    });
  </script>
</dom-module>