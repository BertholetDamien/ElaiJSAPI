/*
@License
The MIT License (MIT)

Copyright (c) 2016 Bertholet Damien

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.

ElaiJS version: 0.9
*/(function(e){function o(){t=a(),u()}function u(){var t=f("main");t&&e.require([t])}function a(){var e=f("baseUrl");if(e)return e;var t=f("app")||f("appDebug");if(!t)return".";var n=t.lastIndexOf("/");return t.substring(0,n)}function f(e){var t,n=document.getElementsByClassName("elaiJS");return n&&n.length>0&&(t=n[0].getAttribute("data-"+e)),t===""?undefined:t}function l(e){var t=h(e);document.getElementsByTagName("head")[0].appendChild(t)}function c(e){s&&s.require&&s.require.paths&&s.require.paths[e]&&(e=s.require.paths[e]);if(e.indexOf(".js")>=0)return e;var n=t+"/"+e+".js";return s&&s.require&&s.require.urlArgs&&(n+="?"+s.require.urlArgs),n}function h(e){var t=document.createElement("script");return t.type="text/javascript",t.charset="utf-8",t.async=!0,t.id="requireElaiJS_module_"+e,t.classList.add("requireElaiJS_module"),t.setAttribute("data-moduleName",e),t.addEventListener("load",p,!1),t.addEventListener("error",d,!1),t.src=c(e),t}function p(){var t=this.getAttribute("data-moduleName"),r=n.shift();r?e.define(t,r.deps,r.callback):y(t,null)}function d(e){var t=this.getAttribute("data-moduleName");throw S(e,t),new Error("Error: Script error during loading module '"+t+"'")}function v(t,n,r){if(typeof r=="object"){y(t,r);return}e.require(n,function(){var i=r.apply(e,arguments),s=m(n);i=s===undefined?i:arguments[s],y(t,i)})}function m(e){for(var t in e)if(e[t]==="exports")return t}function g(e,t){n.push({deps:e,callback:t})}function y(e,t){if(r[e]){E(e,t);return}r[e]=t,E(e,t),x(e)}function b(e,t,n){if(r[e]!==undefined)return t&&t(r[e],e),r[e];if(!t)throw new Error("Module '"+e+"' has not been loaded.");if(e==="exports")return t?t({},e):undefined;var i=w(e,t,n);i&&l(e)}function w(e,t,n){var r=!0;return i[e]?r=!1:i[e]=[],i[e].push({callback:t,errCallback:n}),r}function E(e,t){if(!i[e])return;for(var n in i[e])i[e][n].callback(t,e);delete i[e]}function S(e,t){if(!i[t])return;for(var n in i[t])i[t][n].errCallback&&i[t][n].errCallback(e,t);delete i[t]}function x(e){if(!s||!s.require||!s.require.shim||!s.require.shim[e]||!s.require.shim[e].init)return;s.require.shim[e].init()}function T(t,n,r){var i={},s=t.length,o=function(o,u){--s,i[u]=o;if(s===0){var a=N(t,i);n&&n.apply(e,a)}};for(var u in t)b(t[u],o,r);t.length===0&&n()}function N(e,t){var n=[];for(var r in e)n.push(t[e[r]]);return n}function C(e){if(!s||!s.require||!s.require.shim)return[];var t=s.require.shim,n=[];for(var r in e){var i=t[e[r]];i&&i.deps&&(n=n.concat(i.deps))}return n.length>0?C(n).concat(n):[]}console&&console.time&&console.time("ElaiJS Start in");if(e.define&&e.define.amd)return e.require(["elaiJS/elaiJSMain"]);var t,n=[],r={},i={},s;e.require=function(t,n,r){if(typeof t=="string")return b(t);var i=C(t);T(i,function(){T(t,n,r)},r)},e.define=function(t,n,r){typeof t=="string"&&!r&&(r=n,n=[]);if(!r){n||(n=t,t=[]),g(t,n);return}v(t,n,r)},e.requireElaiJS={},e.requireElaiJS.setConfig=function(e){s=e},e.requireElaiJS.undef=function(e){delete r[e];var t=document.getElementById("requireElaiJS_module_"+e);t&&t.parentNode&&t.parentNode.removeChild(t)},e.requireElaiJS.undefAll=function(t){for(var n in r){var i=!1;for(var s in t)if(n===t[s]){i=!0;break}i||e.requireElaiJS.undef(n)}},e.define.amd={jQuery:!0},o()})(this);define("elaiJS/helper",[],function(){var e={};return e.extractGetParams=function(){return e.extractParams(location.search.substring(1))},e.extractParams=function(t,n){if(!t||t==="")return{};t=t.replace(/[\r\n|\r|\n]/g,"");var r=t.split("&"),i={};for(var s in r){var o=r[s].split("="),u=o[0],a=o[1];n&&(u=u?u.trim():undefined,a=a?a.trim():undefined),i[u]=a}return i},e.extractArray=function(t,n){if(t===undefined||t===null)return[];t=t.replace(/[\r\n|\r|\n]/g,"");var r=t.split(","),i=[];for(var s in r){var o=r[s];o=n&&o?o.trim():o,i.push(o)}return i},e.isFunction=function(t){return typeof t=="function"},e.isObject=function(t){return t!==null&&typeof t=="object"},e.isEmail=function(t){var n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return n.test(t)},e.getElaiJSAttribute=function(t){var n,r=document.getElementsByClassName("elaiJS");return r&&r.length>0&&(n=r[0].getAttribute("data-"+t)),n===""?undefined:n},e.clone=function(t){return t===null||t===undefined?undefined:JSON.parse(JSON.stringify(t))},e.parseJSON=function(t){try{return JSON.parse(t)}catch(n){return undefined}},e.capitalize=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},e.equals=function(t,n,r){if(r===!1&&t==n||t===n)return!0;if(!t||!n)return!1;if(!e.isObject(t)||!e.isObject(t))return!1;if(r!==!1&&Object.keys(t).length!==Object.keys(n).length)return!1;for(var i in t)if(!e.equals(t[i],n[i]))return!1;return!0},e}),define("elaiJS/binder",["elaiJS/helper"],function(e){function r(e){for(var t in e)if(e[t].bindOne)return e.splice(t,1),r(e)}var t={},n={};return t.bindGlobal=function(r,i,s,o){return t.bind.call(n,r,i,s,o||this)},t.bindOneGlobal=function(r,i,s,o){return t.bindOne.call(n,r,i,s,o||this)},t.unbindGlobal=function(r,i){return t.unbind.call(n,r,i)},t.fireGlobal=function(r,i){return t.fire.call(n,r,i)},t.buildGlobalFireCallBack=function(t,r,i){return buildFireCallBack(n,t,r,i)},t.bindOne=function(n,r,i,s){return t.bind.call(this,n,r,i,s,!0)},t.bind=function(n,r,i,s,o){if(!e.isFunction(r))throw new Error("callback argument need to be a function.");this.listeners=this.listeners||{},this.listeners[n]=this.listeners[n]||[];var u={callback:r,params:i,scope:s,bindOne:o};return this.listeners[n].push(u),this},t.unbind=function i(e,t){if(!this.listeners)return this;if(!t)return this.listeners[e]=[],this;var n=this.listeners[e];for(var r in n)if(n[r].callback===t)return n.splice(r,1),i.call(this,e,t);return this},t.unbindAll=function(){return this.listeners=[],this},t.fire=function(n,i){if(!this.listeners)return;n=t.buildEvent.call(this,n,i);var s=this.listeners[n.type];for(var o in s){var u=s[o],a=u.scope||this;u.callback.call(a,n,u.params,n.data)}return r(s),this},t.buildEvent=function(n,r){e.isObject(n)||(n={type:n,data:r});if(!n.type)throw new Error("Type of event is required : "+n);return n.target=n.target||this,n.timeStamp=n.timeStamp||(new Date).getTime(),n},t.buildFireCallBack=function(n,r,i,s){return function(){n.fire(r,s),e.isFunction(i)&&i.call(n)}},t.addBindFunctions=function(e){e.bind=t.bind,e.bindOne=t.bindOne,e.unbind=t.unbind,e.unbindAll=t.unbindAll},t.addFunctions=function(e){t.addBindFunctions(e),e.fire=t.fire},t.addAllFunctions=function(e){t.addFunctions(e),e.fireGlobal=t.fireGlobal,e.bindGlobal=t.bindGlobal,e.unbindGlobal=t.unbindGlobal,e.bindOneGlobal=t.bindOneGlobal},t}),define("elaiJS/cascadeCaller",[],function(){return function(e,t,n,r,i){function o(){var t=[];for(var u in arguments)t.push(arguments[u]);++s;if(s===e.length)return n.apply(i,t);t.push(o),t.push(r);try{e[s].apply(i,t)}catch(a){r.call(i,a)}}i=i||this;var s=-1;o.apply({},t)}}),define("elaiJS/configuration",["elaiJS/helper"],function(e){function n(t,r,i){for(var s in t)if(e.isObject(t[s])&&e.isObject(r[s]))n(t[s],r[s],i);else if(i&&r[s]===undefined||!i)r[s]=t[s]}var t=function(e,r){n(e,t,r)};return t}),define("elaiJS/debugManager",["elaiJS/configuration"],function(e){function n(e,t){require([e],function(e){t=t.replace("/","_"),window[t]=e})}var t={};return t.startDebugMode=function(){for(var t in e.debugModules)n(t,e.debugModules[t]||t)},t}),define("elaiJS/webservice",["elaiJS/binder","elaiJS/cascadeCaller","elaiJS/helper"],function(t,n,r){function f(e,t,n){return{execute:t,useCache:n||!1,name:e.toLowerCase(),displayName:e,interceptors:{before:[],after:[]}}}function l(e){for(var t in s)if(e.toLowerCase()===s[t].toLowerCase())throw new Error("You can't use a Keyword: '"+e+"'")}function c(e){var t=o[e.toLowerCase()];if(!t)throw new Error("WebService '"+e+"' doesn't exist.");return t}function h(e,n,r,i,s){p(e,s);var o=function(r,o){n=r,s=o,t.fire.call(e,"before",{params:n,serviceParams:s}),m(e,n,u,i,s)},u=function(){v(e,n,a,i,s,arguments)},a=function(n,i,s){t.fire.call(e,"after",{params:n,serviceParams:i,result:s}),r.apply(e,s)};d(e,n,o,i,s)}function p(e,t){t.useCache===undefined&&(t.useCache=e.useCache),t.searchInCache===undefined&&(t.searchInCache=!0)}function d(e,t,r,i,s){var o=e.interceptors.before;n(o,[t,s],r,i,e)}function v(e,t,r,i,s,o){var u=e.interceptors.after;n(u,[t,s,o],r,i,e)}function m(e,t,n,i,s){function f(){s.useCache&&(L(e,u,arguments),T(a,arguments)),n.apply(e,arguments)}if(s.searchInCache){var o=g(e,t,n,i);if(o===!0)return}var u=r.clone(t),a;s.useCache&&(a=S(e,u,n));try{e.execute(t,f,i)}catch(l){s.useCache&&N(a,l),i.call(e,l)}}function g(n,r,i,s){var o=k(n,r);if(o)return i.apply(n,o.result),!0;var u=x(n,r);if(u)return t.bind.call(u,"ready",function(e){i.apply(n,e.data)}),t.bind.call(u,"error",function(t){s.apply(n,e.data)}),!0}function y(e,n,r){return t.bind.call(c(n),e,r)}function b(e,n,r){return t.unbind.call(c(n),e,r)}function w(e,t,n){var r=c(t);return r.interceptors[e].push(n),i}function E(e,t,n){var r=c(t);if(n){var s=r.interceptors[e].indexOf(n);r.interceptors[e].splice(s,1)}else r.interceptors[e]=[];return i}function S(e,t,n){var r=e.name;a[r]||(a[r]=[]);var i={service:e,params:t,callback:n};return a[r].push(i),i}function x(e,t){if(!a[e.name])return;var n=a[e.name];for(var i in n)if(r.equals(t,n[i].params,!1))return n[i]}function T(e,n){t.fire.call(e,"ready",n),C(e)}function N(e,n){t.fire.call(e,"error",n),C(e)}function C(e){var t=a[e.service.name];for(var n in t)if(e===t[n])return t.splice(n,1)}function k(e,t){var n=e.name;if(!u[n])return undefined;var i=u[n];for(var s in i)if(r.equals(t,i[s].params,!1))return i[s]}function L(e,t,n){var r=e.name;u[r]||(u[r]=[]),u[r].push({params:t,result:n})}var i={},s=["addService","setDefaultUseCache","addBeforeListener","addAfterListener","removeBeforeListener","removeAfterListener","addBeforeInterceptor","addAfterInterceptor","removeBeforeInterceptor","removeAfterInterceptor"],o={},u={},a={};return i.addService=function(t,n,r){l(t);var s=f(t,n,r);return o[s.name]=s,delete u[s.name],i[t]=function(e,n,r,i){n=n||function(){},r=r||function(e){console.error("Error during execution of service %o: %o",t,e)},h(s,e,n,r,i||{})},i},i.setDefaultUseCache=function(t,n){return c(t).useCache=n,i},i.addBeforeListener=function(t,n){return y("before",t,n)},i.addAfterListener=function(t,n){return y("after",t,n)},i.removeBeforeListener=function(t,n){return b("before",t,n)},i.removeAfterListener=function(t,n){return b("after",t,n)},i.addBeforeInterceptor=function(t,n){return w("before",t,n)},i.addAfterInterceptor=function(t,n){return w("after",t,n)},i.removeBeforeInterceptor=function(t,n){return E("before",t,n)},i.removeAfterInterceptor=function(t,n){return E("after",t,n)},i}),define("elaiJS/defaultConfiguration",["elaiJS/configuration","elaiJS/webservice","elaiJS/helper"],function(e,t,n){function s(){e.isDebug=o(),e.requireElaiJS=window.requireElaiJS,e.homePage="home",e.defaultParentWidget="elaiJS/primaryWidget",e.defaultTheme=undefined,e.defaultMode=undefined,e.defaultLanguage="en",e.autoFindLanguage=!0,e.mustacheLib="lib/mustache.min",e.polymereLib="../bower_components/webcomponentsjs/webcomponents-lite.min",e.defaultLocalisation="en-US",e.autoFindLocalisation=!0,e.matchValidLocalisation={fr:"fr-FR",en:"en-US"},e.storagePath=location.pathname.split(".")[0].substring(1).replace(/\//g,"_"),e.ressources={ressources:"ressources",javascript:"js",css:"css",themes:"{{css}}/themes",theme:"{{themes}}/{{name}}.css",languages:"{{ressources}}/languages",language:"{{languages}}/language_{{name}}.properties",localisations:"{{ressources}}/localisations",localisation:"{{localisations}}/localisation_{{name}}.json",plugins:"plugins",plugin:"{{plugins}}/{{name}}",pluginMode:"{{plugins}}/{{name}}-{{mode}}",widgets:"widgets",widget:"{{widgets}}/{{name}}",widgetMode:"{{widgets}}/{{name}}-{{mode}}",templates:"templates",template:"{{templates}}/{{name}}.tpl",templateMode:"{{templates}}/{{name}}-{{mode}}.tpl",widgetsCSS:"{{css}}/widgets",widgetCSS:"{{widgetsCSS}}/{{name}}.css",widgetCSSMode:"{{widgetsCSS}}/{{name}}-{{mode}}.css"},e.debugModules={"elaiJS/binder":"binder","elaiJS/cascadeCaller":"cascadeCaller","elaiJS/configuration":"config","elaiJS/defaultConfiguration":"defaultConfiguration","elaiJS/defaultWebservices":"defaultWebservices","elaiJS/helper":"helper","elaiJS/language":"lang","elaiJS/localisation":"localisation","elaiJS/mode":"modeManager","elaiJS/multicallback":"multicallback","elaiJS/navigator":"historyNavigator","elaiJS/plugin":"pluginManager","elaiJS/propertiesManagerFactory":"propertiesManagerFactory","elaiJS/ressources":"ressources","elaiJS/localStorage":"elaiStorage","elaiJS/theme":"themeManager","elaiJS/webservice":"webservice","elaiJS/widget":"widgetManager"}}function o(){var e=n.getElaiJSAttribute("debug");return e=e||n.extractGetParams().debug,e=="true"}function u(){e.defaultTheme==="undefined"&&(e.defaultTheme=undefined),e.version===undefined&&(e.version=n.getElaiJSAttribute("version")),e.requireElaiJS&&e.version&&(!e.require||!e.require.urlArgs)&&(e.require||(e.require={}),e.require.urlArgs="v="+e.version);if(e.setDefaultNavigationFunctions===!1)return;e.buildHash=function(t){var n="#"+t.page;if(Object.keys(t).length>1){n+="/";for(var r in t)r!="page"&&(n+=r+"="+t[r]+"&");n=n.substring(0,n.length-1)}return n},e.extractPageInfo=function(r){if(!r||r===""||r==="#")return{page:e.homePage};var i=r.split("/"),s=n.extractParams(i[1]);return s.page=i[0],s}}function a(t){f(function(n){r=n,n&&e(n),t()})}function f(e){var r=n.getElaiJSAttribute("config");r?t.loadJSONFile(r,e):e()}var r,i={};return i.resetConfiguration=function(){var n=Object.keys(e);for(var r in n)delete e[n[r]]},i.setDefaultConfiguration=function(t){i.resetConfiguration(),s(),a(function(){u(),t&&t()})},i}),define("elaiJS/ressources",["elaiJS/configuration"],function(e){function n(e,t,i){var s=e.match("\\{\\{[a-zA-Z0-9]*\\}\\}");if(!s)return e;s=s[0];var o=r(s,t,i);return e=e.replace(s,o),n(e,t,i)}function r(e,n,r){var i=e.substring(2,e.length-2);if(n&&n[i])return n[i];var s=t.get(i,n,r);return s===undefined?"[notfound]":s}var t={};return t.get=function(r,i,s){s||(s=e.ressources);var o=s[r];return o?n(o,i,s):undefined},t.getFull=function(r,i,s){return s||(s=e.ressources),n(r,i,s)},t}),define("elaiJS/mode",["elaiJS/configuration","elaiJS/helper","elaiJS/ressources","elaiJS/binder"],function(e,t,n,r){function u(t,n){for(var r in n)if(n[r].toLowerCase()===t.toLowerCase())return t;return e.modes&&e.modes[t]?u(e.modes[t],n):undefined}var i=null,s={};r.addFunctions(s);var o={modeChanged:"modeChanged"};return s.EVENT=o,s.getMode=function(){return i===null?e.defaultMode:i},s.setMode=function(t){if(t===i)return;var n={oldMode:i,newMode:t};i=t,s.fire(o.modeChanged,n)},s.getRessource=function(e,r,i,o){t.isObject(r)||(r={name:r}),i||(i=e),o||(o=i+"Mode"),r.mode=s.findMode(e,r);var u=r.mode?o:i;return n.get(u,r)},s.findMode=function(n,r){if(!r.mode||!e.modesRessources||!e.modesRessources[n]||!e.modesRessources[n][r.name])return undefined;var i=e.modesRessources[n][r.name];return u(r.mode,i)},s}),define("elaiJS/defaultWebservices",["elaiJS/webservice","elaiJS/ressources","elaiJS/helper","elaiJS/configuration","elaiJS/mode"],function(e,t,n,r,i){function o(t,n,r){var s=t.name;t.name.indexOf("/")===-1&&(s=i.getRessource("widget",t)),e.loadJSFile(s,n,r)}function u(t,n,r){var s=t.name;t.url?s=t.url:t.name.indexOf("/")===-1&&(s=i.getRessource("plugin",t)),e.loadJSFile(s,n,r)}function a(t,n,r){var i=f(t);for(var s in i){var o=i[s];e.loadCSS({url:o.url},n,r)}}function f(e){var t=e.css;t===!0&&(t=[{name:e.name,mode:e.defaultMode}]);for(var n in t){var r=t[n];r.mode=r.mode===null?undefined:r.mode||e.defaultMode;var s=i.getRessource("widget",r,"widgetCSS","widgetCSSMode");r.url=s}return t}function l(n,r,i){var s=t.get("localisation",{name:n});e.loadJSONFile(s,r,i)}function c(n,r,i){var s=t.get("language",{name:n});e.loadPropertiesFile(s,r,i)}function h(t,n,r){var s=i.getRessource("template",t);e.loadTextFile({url:s},n,r)}function p(n,i,s){var o=t.get("theme",n);r.loadThemeAsPolymerMixin===!0?d(o,i,s):e.loadCSS(o,i,s,{useCache:!1})}function d(t,n,r){e.loadJSONFile(t,function(e){v(e,n)},r)}function v(e,t,r){setTimeout(function(){if(!window.Polymer||!n.isFunction(Polymer.updateStyles))return v(e,t,100);window.Polymer.updateStyles(e),t()},r)}function m(n,i,s){if(r.loadThemeAsPolymerMixin)return i();var o=t.get("theme",n);e.removeDocument(o,i,s)}function g(t,r,i){n.isObject(t)||(t={url:t}),t.rel="stylesheet",t.type="text/css",e.loadDocument(t,r,i)}function y(e,t,r){n.isObject(e)||(e={url:e});var i=document.createElement("link");e.type&&(i.type=e.type),i.rel=e.rel||"import",i.href=e.url+L(e.addVersion,!0),i.addEventListener("load",function(r){r.src=i,n.isFunction(e.onSuccess)&&e.onSuccess(r),t(r)}),i.addEventListener("error",function(t){t.src=i,n.isFunction(e.onError)&&e.onError(t),r(t)}),document.getElementsByTagName("head")[0].appendChild(i)}function b(e,t,r){n.isObject(e)||(e={url:e});var i=e.url+L(e.addVersion,!0),s=document.querySelectorAll('link[href="'+i+'"]');for(var o=0;o<s.length;++o)s[o].parentNode.removeChild(s[o]);t()}function w(t,n,r){e.loadTextFile(t,function(e){n(JSON.parse(e))},r)}function E(t,n,r){e.loadTextFile(t,function(e){n(k(e))},r)}function S(e,t,n){require([e],t,n)}function x(e,t,r){n.isObject(e)||(e={url:e}),e.url+=L(e.addVersion,!0),e.method="GET",T(e,function(e){t(e.isSuccess?e.responseText:undefined)},r)}function T(e,t,r){n.isObject(e)||(e={url:e});var i=e.url,s=C(),o=e.async===!1?!1:!0,u=e.method?e.method.toUpperCase():"GET";s.open(u,i,o);for(var a in e.requestHeader)s.setRequestHeader(a,e.requestHeader[a]);s.onreadystatechange=function(){if(s.readyState!=4)return;s.isSuccess=s.status===200,s.isError=!s.isSuccess,s.responseJSON=n.parseJSON(s.responseText),s.isSuccess&&n.isFunction(e.onSuccess)?e.onSuccess(s):s.isError&&n.isFunction(e.onError)&&e.onError(s),s.isError?r():t(s)};var f=e.data?JSON.stringify(e.data):null;s.send(f)}function N(e,t,r){n.isObject(e)||(e={url:e}),e.method=e.method||"POST",e.requestHeader=e.requestHeader||{},e.requestHeader["Content-Type"]||(e.requestHeader["Content-Type"]="application/json;charset=UTF-8"),T(e,t,r)}function C(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}throw new Error("Your browser doesn't support XMLHTTPRequest.")}function k(e){var t={},n=e.split(/\r?\n/);for(var r in n){var i=n[r],s=i.indexOf("="),o=i.substr(0,s),u=i.substr(s+1);t[o]=u}return t}function L(e,t){return r.version?(e===undefined&&(e=t===undefined?!0:t),e?"?v="+r.version:""):""}var s={};return s.addDefaultWebservices=function(){e.addService("call",T),e.addService("ajax",N),e.addService("loadTextFile",x),e.addService("loadDocument",y),e.addService("removeDocument",b),e.addService("loadCSS",g,!0),e.addService("loadJSONFile",w),e.addService("loadPropertiesFile",E),e.addService("loadJSFile",S),e.addService("loadTheme",p),e.addService("removeTheme",m),e.addService("loadLanguageFile",c),e.addService("loadLocalisationFile",l),e.addService("loadTemplate",h,!0),e.addService("loadWidget",o),e.addService("loadPlugin",u),e.addService("loadWidgetCSS",a)},s}),define("elaiJS/multicallback",[],function(){return function(e,t,n){return n=n||this,function(){--e,e<=0&&t&&t.call(n)}}}),define("elaiJS/propertiesManagerFactory",["elaiJS/multicallback"],function(e){function t(t){function s(e,n){if(!i[n])throw t.name+" '"+n+"' is not loaded.";return i[n][e]}function o(e,n){t.loadProperties(e,function(t){i[e]=t,n()})}var n={},r,i={};return n.initialize=function(i){var s=e(2,i);o(t.getDefaultKey(),s);var u=t.findFirstKey()||t.getDefaultKey();n.setKey(u,s)},n.get=function(n,i){if(i)return s(n,i);var o=s(n,r);return!o&&t.getDefaultKey()!=r?s(n,t.getDefaultKey()):o},n.getCurrentKey=function(){return r},n.setKey=function(t,n){r=t,i[r]?n&&n():o(r,n)},n}return{build:t}}),define("elaiJS/language",["elaiJS/configuration","elaiJS/webservice","elaiJS/propertiesManagerFactory","elaiJS/binder"],function(e,t,n,r){function u(){var t=window.navigator.userLanguage||window.navigator.language;return e.autoFindLanguage!==!0||!t?undefined:t.split("-")[0]}var i=n.build({name:"Language",getDefaultKey:function(){return e.defaultLanguage},loadProperties:function(e,n){t.loadLanguageFile(e,n)},findFirstKey:u}),s={};r.addFunctions(s);var o={languageChanged:"languageChanged"};return s.EVENT=o,s.initialize=i.initialize,s.getLanguage=i.getCurrentKey,s.setLanguage=function(t,n){var s=r.buildFireCallBack(this,o.languageChanged,n);i.setKey(t,s)},s.get=function(t,n,r){var s=i.get(t,r);if(!s)return s;for(var o in n){var u=new RegExp("\\{\\{"+o+"\\}\\}","g");s=s.replace(u,n[o])}return s},s}),define("elaiJS/localisation",["elaiJS/configuration","elaiJS/webservice","elaiJS/helper","elaiJS/propertiesManagerFactory","elaiJS/binder"],function(e,t,n,r,i){function a(){if(e.autoFindLocalisation!==!0)return undefined;var t=window.navigator.userLanguage||window.navigator.language;return o.findValidLocalisation(t)}var s=r.build({name:"Localisation",getDefaultKey:function(){return o.findValidLocalisation(e.defaultLocalisation)},loadProperties:function(e,n){t.loadLocalisationFile(e,n)},findFirstKey:a}),o={};i.addFunctions(o);var u={localisationChanged:"localisationChanged"};return o.EVENT=u,o.initialize=s.initialize,o.getLocalisation=s.getCurrentKey,o.get=function(t,n){return s.get(t,o.findValidLocalisation(n))},o.setLocalisation=function(t,n){var r=i.buildFireCallBack(this,u.localisationChanged,n);s.setKey(o.findValidLocalisation(t),r)},o.findValidLocalisation=function(n){return!n||!e.matchValidLocalisation||!e.matchValidLocalisation[n]?n:o.findValidLocalisation(e.matchValidLocalisation[n])},o.toLocaleString=function(e,t){return t&&(t=o.findValidLocalisation(t)),t||(t=o.getLocalisation()),n.isObject(e)||(e=new Date(e)),e.toLocaleString(t)},o}),define("elaiJS/rendererFactory",["elaiJS/helper"],function(e){return function(t,n,r){function u(e){if(t.isLibLoaded.call(this))return e.call(this);t.bindOne("libLoaded",e,undefined,this)}function a(){this.elementDOM=undefined,e.isFunction(i)&&i.call(this)}function f(e){u.call(this,function(){l.call(this,e)})}function l(n){var r=this;c.call(this);if(e.isFunction(t.render))return t.render.call(this,n);t.getHTML.call(this,function(t){p.call(r,t),e.isFunction(o)?o.call(this,n):n()})}function c(){var e=h.call(this);if(!e)throw new Error("Can't find DOM element for widget: "+this.id);this.elementDOM=e}function h(){var t;return e.isFunction(this.findDOMElement)&&(t=this.findDOMElement()),t||document.getElementById(this.id)}function p(e){if(m.call(this))return this.elementDOM.insertAdjacentHTML("beforeend",e);this.elementDOM.innerHTML=e,v.call(this,!0)}function d(){if(e.isFunction(t.removeRender))return t.removeRender.call(this);if(!this.elementDOM||m.call(this))return;this.elementDOM.innerHTML="",v.call(this,!1),e.isFunction(o)&&o.call(this)}function v(e){var t=e?"add":"remove",n=this.name.replace(/\//g,"_");this.elementDOM.classList[t](n),this.elementDOM.classList[t]("widget"),this.mode&&this.elementDOM.classList[t]("mode-"+this.mode)}function m(){return e.isFunction(this.mustAppendHTML)&&this.mustAppendHTML()===!0}var i=r.initializeVariablesBeforeWidget,s=r.renderBeforeWidget,o=r.removeRenderBeforeWidget;return r.initializeVariablesBeforeWidget=a,r.renderBeforeWidget=f,r.removeRenderBeforeWidget=d,r}}),define("elaiJS/mustacherend",["elaiJS/configuration","elaiJS/webservice","elaiJS/language","elaiJS/localisation","elaiJS/helper","elaiJS/binder","elaiJS/rendererFactory"],function(e,t,n,r,i,s,o){var u;return function(a,f){function h(){this.templateData=undefined}function p(){var e=d.call(this);e&&t.loadWidgetCSS(e)}function d(){var e=f.CSS;return e?{css:e,name:this.name,defaultMode:this.mode}:undefined}function v(){if(u)return;require([e.mustacheLib],function(e){u=e,l.fire("libLoaded")})}function m(n){var r=this,i=g.call(this);t.loadTemplate(i,function(t){var i={widget:r,w:r,data:r.templateData,config:e,lang:y(b),loc:y(w),buildHash:y(E)},s=u.render(t,i);n(s)})}function g(){if(!i.isFunction(this.getTemplateInfo))return{name:this.name,mode:this.mode};var e=this.getTemplateInfo();return i.isObject(e)?e:{name:e,mode:this.mode}}function y(e){return function(){return e}}function b(e,t){var r=i.extractParams(t(e),!0);return Object.keys(r).length===1&&!r.key&&(r.key=Object.keys(r)[0]),e=n.get(r.key,r,r.lang),e}function w(e,t){var n=i.extractParams(t(e),!0);Object.keys(n).length===1&&!n.key&&(n.key=Object.keys(n)[0]);if(n.fct==="get"||!n.fct)e=r.get(n.key,n.loc);else{var s=[];n.arrayParams&&(s=i.extractArray(n.arrayParams,!0)),e=r[n.fct].apply(r,s)}return e}function E(t,n){var r=i.extractParams(n(t),!0);return Object.keys(r).length===1&&!r.page&&(r={page:Object.keys(r)[0]}),e.buildHash(r)}var l={isLibLoaded:function(){return u!==undefined},getHTML:m};s.addAllFunctions(l),v();var c={events:{beforeCreate:p},initializeVariablesBeforeWidget:h};return c=o(l,f,c),c}}),define("elaiJS/navigator",["elaiJS/configuration","elaiJS/binder"],function(e,t){function a(){window.onhashchange=function(){if(i)return i=!1;if(o){l(r.beforeUnload),l(r.beforeUnloadConfirm),p();return}f()}}function f(){var e=u;n.initializeCurrentPage(),l(r.pageChanged,u,e)}function l(e,t,r){var i={type:e,newPageInfo:t,oldPageInfo:r};n.fire(i)}function c(t){if(!e.buildHash)throw new Error("You need to configure 'buildHash'.");return e.buildHash(t)}function h(){var t=location.hash.substring(1);if(!e.extractPageInfo)throw new Error("You need to configure 'extractPageInfo'.");return e.extractPageInfo(t)}function p(){var e=d(!0),t=!0;e&&(t=confirm(e)),t?f():(i=!0,n.back())}function d(t){return s?s(o,t):e.beforeUnloadCallback?e.beforeUnloadCallback(o,t):o}function v(e,t,n){var r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+i}function m(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return""}var n={};t.addFunctions(n);var r={beforeUnload:"beforeUnload",beforeUnloadConfirm:"beforeUnloadConfirm",beforeUnloadNavigator:"beforeUnloadNavigator",pageChanged:"pageChanged"};n.EVENT=r;var i=!1,s,o,u;return n.initializeCurrentPage=function(){u=h()},n.getCurrentPageInfo=function(){return u},n.goTo=function(t){location.hash=c(t)},n.forward=function(){window.history.forward()},n.back=function(){window.history.back()},n.getHistoryState=function(t){return window.history.state},n.saveHistoryState=function(t){window.history.pushState(t,"")},n.addToHistoryState=function(t){var r=n.getHistoryState();r||(r={});for(var i in t)r[i]=t[i];n.saveHistoryState(r)},n.setBeforeUnloadMessage=function(t,n){s=n,o=t,window.onbeforeunload=function(){return l(r.beforeUnload),l(r.beforeUnloadNavigator),d(!1)}},n.removeBeforeUnloadMessage=function(){window.onbeforeunload=undefined,s=undefined,o=undefined},n.addCookie=function(e,t){var r=t?{name:e,value:t}:e;r.remove!==!1&&n.removeCookie(r.name);var i=r.expires;!i&&r.days&&(i=new Date,i.setTime(i.getTime()+r.days*24*60*60*1e3));var s=r.name+"="+r.value+"; ";return i&&(s+="expires="+i.toUTCString()+";"),r.path&&(s+="path="+r.path+";"),document.cookie=s,n},n.getCookie=function(e){return n.getCookies()[e]},n.removeCookie=function(e){var t=new Date;return t.setTime(t.getTime()-1),n.addCookie({name:e,value:"",expires:t,remove:!1})},n.getCookies=function(){var e=document.cookie.split(";"),t={};for(var n in e){var r=e[n].trim();r!==""&&(r=r.split("="),t[r[0]]=r[1])}return t},n.removeAllCookies=function(){for(var e in n.getCookies())n.removeCookie(e)},a(),n}),define("elaiJS/plugin",["elaiJS/webservice","elaiJS/multicallback","elaiJS/configuration","elaiJS/helper"],function(e,t,n,r){function o(e){var t=l(e),n=e.properties.plugins||{};return n=r.clone(n),a(n,t),e.properties.inheritDefaultPlugins&&h(n),u(n),n}function u(e){for(var t in e){var n=e[t];n.name=t,n.inherit===!0&&delete e[t]}}function a(e,t){for(var n in t)e[n]?e[n]=f(e[n],t[n]):e[n]=t[n]}function f(e,t){if(e.inheritParams===!0)return e;for(var n in t)e[n]===undefined&&(e[n]=t[n]);return e}function l(e){return e.parent?o(e.parent):c()}function c(){return n.defaultPlugins||{}}function h(e){var t=c();for(var n in t)delete e[n]}function p(e,t,n){var r=t.name,i=t.mode;n.plugins||(n.plugins=[]),n.plugins.push({info:t,plugin:e}),n.plugins=d(n.plugins),v(e,n)}function d(e){return e.sort(function(e,t){var n=e.info.priority,r=t.info.priority;return n===r?0:n<r?-1:1})}function v(e,t){for(var n in e.events)r.isFunction(e.events[n])&&t.bind(n,e.events[n],undefined,t)}function m(e,t,n){g(e,function(r){var i=r(t,e)||{};n(i)})}function g(t,n){e.loadPlugin(t,n)}var i=100,s={};return s.applyDefaultPlugins=function(t,n,r){var i=o(n);s.applyPlugins(i,t,r)},s.applyPlugins=function(n,r,i){var o=Object.keys(n).length;if(o===0){i();return}var u=t(o,i);for(var a in n)s.applyPlugin(n[a],r,u)},s.applyPlugin=function(t,n,r){t.mode===undefined&&(t.mode=n.mode),t.priority===undefined&&(t.priority=i),m(t,n,function(e){p(e,t,n),r&&r()})},s}),define("elaiJS/polymerend",["elaiJS/configuration","elaiJS/webservice","elaiJS/mode","elaiJS/helper","elaiJS/binder","elaiJS/rendererFactory"],function(e,t,n,r,i,s){var o;return function(t,o){function f(){this.viewData=undefined}function l(){if(window.WebComponents)return c();require([e.polymereLib]),window.addEventListener("WebComponentsReady",c)}function c(){c=!0,u.fire("libLoaded")}function h(e){var t=v.call(this),r=n.getRessource("WebComponent",t);this.elementPolymer=document.createElement(r),this.viewData&&(this.elementPolymer.data=this.viewData),this.elementPolymer.widget=this,d.call(this,e),p.call(this);while(this.elementDOM.children.length>0)this.elementDOM.removeChild(this.elementDOM.children[0]);this.elementDOM.appendChild(this.elementPolymer)}function p(){var e=this;for(var t in this.viewEvents)this.elementPolymer.addEventListener(t,function(n){e.viewEvents[t].call(e,n.detail,n)})}function d(e){function n(){t.elementPolymer.removeEventListener("attached",n),e()}var t=this;this.elementPolymer.addEventListener("attached",n)}function v(){if(!r.isFunction(this.getWebComponentInfo))return{name:this.name,mode:this.mode};var e=this.getWebComponentInfo();return r.isObject(e)?e:{name:e,mode:this.mode}}var u={isLibLoaded:function(){return c},render:h};i.addAllFunctions(u),l();var a={initializeVariablesBeforeWidget:f};return a=s(u,o,a),a}}),define("elaiJS/widget",["elaiJS/configuration","elaiJS/webservice","elaiJS/plugin","elaiJS/helper","elaiJS/mode"],function(e,t,n,r,i){function a(e){for(var t in e.children)s.add(e.children[t])}function f(e){for(var t in e.children)s.remove(e.children[t])}function l(e,t,r,i,o){var u=c(e,t,i);s.add(u),n.applyDefaultPlugins(u,i,function(){u.create(function(){u.initialize(r,function(){o(u)})})})}function c(e,t,n){return Object.create(n.proto,{name:{value:e.name,enumerable:!0},id:{value:t,enumerable:!0},mode:{value:e.mode,enumerable:!0}})}function h(e,t){var n=e;r.isObject(n)||(n={name:e}),n.mode=e.mode||t||i.getMode();if(e.mode===null||t===null)n.mode=undefined;return n}function p(e,t){d(e,function(e){t(y(e))})}function d(e,t){var n;o[e.name]&&(n=o[e.name][e.mode]),n?t&&t(n):v(r.clone(e),t)}function v(e,n){t.loadWidget(e,function(t){r.isFunction(t)&&(t={builder:t});if(!t.builder)throw new Error("No builder for widget "+e.name);var i=m(e,t);if(i===null)return n(g(e,t));d(i,function(r){n(g(e,t,r))})})}function m(t,n){var r=n.parent,i=r===undefined?e.defaultParentWidget:r;return i!==null&&(i=h(i,t.mode)),i}function g(e,t,n){o[e.name]||(o[e.name]={});var r={properties:t,name:e.name,mode:e.mode,parent:n};return o[e.name][e.mode]=r,r}function y(e){var t={};return e.parent&&(t=b(e.parent)),e.properties.builder.call(t,t),e=r.clone(e),e.proto=t,e}function b(e){if(!e.parent)return w(e,{});var t=b(e.parent);return w(e,t)}function w(e,t){return e.properties.builder.call(t,t),Object.create(t,{"super":{value:t,enumerable:!0}})}var s={},o={},u={};return s.widgets=u,s.create=function(t,n,r,i){if(!n)throw new Error("ID are required");t=h(t);if(!t.name)throw new Error("Name are required");p(t,function(e){l(t,n,r,e,i)})},s.createAndRender=function(t,n,r,i,o){s.create(t,n,r,function(e){e.render(i,function(){o&&o(e)})})},s.add=function(t){if(!t)throw new Error("Widget undefined");if(!t.id)throw new Error("The widget has no id: "+t);if(u[t.id])throw new Error("A Widget already exist with this id  : "+t.id);u[t.id]=t,a(t)},s.removeByID=function(t){var n=s.get(t);n&&s.remove(n)},s.remove=function(t){if(!t)throw new Error("Widget undefined");if(!t.id)throw new Error("The widget has no id: "+t);delete u[t.id],f(t)},s.get=function(t){return u[t]},s.getWidgetsByName=function(t){var n=[];for(var r in u){var i=u[r];i.name===t&&n.push(i)}return n},s}),define("elaiJS/primaryWidget",["elaiJS/widget","elaiJS/multicallback","elaiJS/binder","elaiJS/helper"],function(e,t,n,r){var i={};return i.parent=null,i.builder=function(){function i(e,t,n){var r=this;this.callPluginsFct(e+"BeforeWidget",function(){o.call(r,e,function(i){r.callPluginsFct(e+"AfterWidget",function(){t?u.call(r,e,function(){n(i)}):n(i)})})})}function s(e,t){this.callPluginsFct(e+"BeforeWidget");var n=o.call(this,e);return this.callPluginsFct(e+"AfterWidget"),t&&u.call(this,e),n}function o(e,t){var n="_"+e;if(r.isFunction(this[n]))return this[n](t);t&&t()}function u(e,t,n){var r=a.call(this,e,n);r?this[e+"Children"](t):t&&t()}function a(e,t){t=t===undefined?!0:t;var n="need"+r.capitalize(e)+"Children";return f.call(this,n,t)}function f(e,t){var n=this[e];return r.isFunction(this[e])&&(n=this[e]()),n===undefined&&(n=t),n}function l(){this.children&&Object.keys(this.children).length>0?this.destroyChildren():this.children={}}function c(e){var n=Object.keys(this.children).length;if(n===0&&e){e();return}return t(n,e)}function h(e){this[e+"ChildByID"]=function(t,n){var r=this.children[t];if(!r)return;r[e].apply(r,n)}}function p(e){this[e+"ChildsByName"]=function(t,n){var r=this.findChilds(t);for(var i in r)r[i][e].apply(r[i],n)}}function d(e,t,n){n||this.fire(t+r.capitalize(e))}this.create=function(t,n){this.before("create",n);var r=this.buildAfterCB("create",t,n);i.call(this,"create",!1,r)},this.initialize=function(t,n,r){this.before("initialize",r),this.initializeVariables(),this.params=t||{};var s=this.buildAfterCB("initialize",n,r);i.call(this,"initialize",!1,s)},this.initializeVariables=function(t){this.before("initializeVariables",t),this.params={},this.renderParams={},l.call(this),s.call(this,"initializeVariables",!1),this.after("initializeVariables",t)},this.refresh=function(t,n){this.before("refresh",n);var r=this,i=this.buildAfterCB("refresh",t,n);this.refreshData(function(){r.refreshRender(function(){u.call(r,"refresh",i)},!1)})},this.refreshData=function(t,n){this.before("refreshData",n);var r=this;this.fetchData(function(e){r.setData(e,!0),r.after("refreshData",n),t&&t()})},this.fetchData=function(t,n){this.before("fetchData",n);var r=this.buildAfterCB("fetchData",t,n);i.call(this,"fetchData",!1,r)},this.setData=function(t,n,r){this.before("setData",r),n?(this.rowData=t,this.data=this.processRowData()):(this.rowData=undefined,this.data=t),this.fire("dataChanged",this.data),this.after("setData",r)},this.processRowData=function(t){this.before("processRowData",t);var n=s.call(this,"processRowData",!1);return this.after("processRowData",t),n},this.refreshRender=function(t,n,r){this.before("refreshRender",r);var s=this.buildAfterCB("refreshRender",t,r);i.call(this,"refreshRender",!1,s)},this.render=function(t,n,r){this.before("render",r),this.renderParams=t;var s=this.buildAfterCB("render",n,r);i.call(this,"render",!0,s)},this.removeRender=function(t,n){this.before("removeRender",n),s.call(this,"removeRender",!0),this.after("removeRender",n)},this.reload=function(t,n,r,i){this.before("reload",i);var s=this,o=this.buildAfterCB("reload",r,i);this.initialize(t||s.params,function(){s.removeRender(!1),s.render(n||s.renderParams,o)})},this.destroy=function(t){this.before("destroy",t),this.destroyChildren(),this.remove(!1),this.unbindAll(),s.call(this,"destroy",!1),this.after("destroy",t)},this.remove=function(t,n){this.before("remove",n),this.removeRender(t),e.get(this.id)&&e.remove(this),this.after("remove",n)},this.callPluginsFct=function(n,i){this.before(n+"Plugins");var s=this.buildAfterCB(n+"Plugins",i);if(!this.plugins)return s();var o=this.plugins.length,u=t(o,s);for(var a=0;a<o;++a){var f=this.plugins[a].plugin;r.isFunction(f[n])?f[n].call(this,u):u&&u()}},this.findChild=function(t,n){for(var r in this.children){var i=this.children[r];if(i.name===t.toLowerCase())return i;if(n){var s=i.findChild(t,!0);if(s)return s}}},this.findChilds=function(t,n){var r=[];for(var i in this.children){var s=this.children[i];s.name===t.toLowerCase()&&r.push(s),n&&(r=r.concat(s.findChilds(t,!0)))}return r},this.addChild=function(n,r){this.before("addChild",r),this.children[n.id]=n,n.widgetParent=this,e.get(n.id)||e.add(n),this.after("addChild",r)},this.createChild=function(n,i,s,o,u){this.before("createChild",u),r.isObject(n)?n.mode===undefined&&(n.mode=this.mode):n={name:n,mode:this.mode};var a=this,f=this.buildAfterCB("createChild",o,u);e.create(n,i,s,function(e){a.addChild(e),f(e)})},this.createChildAndRender=function(e,t,n,r,i){this.createChild(e,t,n,function(e){e.render(r,function(){i&&i(e)})})},this.removeRenderChildren=function(t){this.applyOnChildren("removeRender",undefined,undefined,t)},this.renderChildren=function(t,n){this.applyOnChildren("render",function(e,t){e.render(undefined,t)},t,n)},this.reloadChildren=function(t,n){this.applyOnChildren("reload",function(e,t){e.reload(undefined,undefined,t)},t,n)},this.refreshChildren=function(t,n){this.applyOnChildren("refresh",function(e,t){e.refresh(t)},t,n)},this.destroyChildren=function(t){this.applyOnChildren("destroy",undefined,undefined,t)},this.applyOnChildren=function(t,n,r,i){this.before(t+"Children",i),n||(n=function(e,n){e[t](),n()});var s=this.buildAfterCB(t+"Children",r,i),o=c.call(this,s);for(var u in this.children)n(this.children[u],o)},h.call(this,"destroy"),p.call(this,"destroy"),n.addAllFunctions(this),this.fire=function(t,i){t=n.buildEvent(t,i),n.fire.call(this,t),r.isFunction(this[t.type])&&this[t.type](t)},this.before=function(t,n){d.call(this,t,"before",n)},this.after=function(t,n){d.call(this,t,"after",n)},this.buildAfterCB=function(t,n,i){var s=this;return function(){s.after(t,i),r.isFunction(n)&&n.apply(s,arguments)}},this.async=function(e,t,n){var r=this;setTimeout(function(){e.apply(r,n)},t)}},i}),define("elaiJS/theme",["elaiJS/webservice","elaiJS/configuration","elaiJS/ressources","elaiJS/binder"],function(e,t,n,r){function u(t,n,r){var u={oldTheme:o,newTheme:t};o=t;if(!t)return i.fire(s.themeChanged,u);e.loadTheme({name:t},function(){i.fire(s.themeChanged,u),n&&n()},r)}var i={};r.addFunctions(i);var s={themeChanged:"themeChanged"};i.EVENT=s;var o;return i.getTheme=function(){return o},i.initialize=function(n,r){t.defaultTheme&&i.setTheme(t.defaultTheme,n,r)},i.setTheme=function(n,r,i){e.removeTheme({name:o},function(){u(n,r)},i)},i});define("elaiJS/elaiJSMain",["elaiJS/helper","elaiJS/binder","elaiJS/cascadeCaller","elaiJS/multicallback","elaiJS/propertiesManagerFactory","elaiJS/configuration","elaiJS/ressources","elaiJS/mode","elaiJS/navigator","elaiJS/webservice","elaiJS/defaultWebservices","elaiJS/defaultConfiguration","elaiJS/theme","elaiJS/language","elaiJS/localisation"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){function v(){m(),l.addDefaultWebservices(),c.setDefaultConfiguration(function(){E(),g(b)})}function m(){require(["elaiJS/plugin","elaiJS/widget","elaiJS/primaryWidget"])}function g(e){h.initialize(),s.setDefaultNavigationFunctions!==!1&&a.initializeCurrentPage();var t=r(2,e);y(p,t,s.skipLanguageInitialization),y(d,t,s.skipLocalisationInitialization)}function y(e,t,n){n!==!0?e.initialize(t):t()}function b(){s.requireElaiJS&&s.requireElaiJS.setConfig(s),console&&console.timeEnd&&s.isDebug&&console.timeEnd("ElaiJS Start in"),document.dispatchEvent&&CustomEvent&&document.dispatchEvent(new CustomEvent("ElaiJSReady")),w()}function w(){var t=e.getElaiJSAttribute("app");if(!t)return;require([t],function(t){t&&e.isFunction(t.start)&&t.start()})}function E(){s.isDebug&&require(["elaiJS/debugManager"],function(e){e.startDebugMode()})}return v(),{}});